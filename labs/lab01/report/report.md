---
## Front matter
title: "Отчёт по лабораторной работе 1"
subtitle: "Знакомство с Cisco Packet Tracer"
author: "Гафоров Нурмухаммад"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Введение

## Цель работы  

Установка инструмента моделирования конфигурации сети Cisco Packet Tracer, знакомство с его интерфейсом.

# Ход выполнения

В Packet Tracer был создан новый проект **lab_PT-01.pkt**. В рабочем поле размещён концентратор **Hub-PT** и четыре оконечных устройства **PC-PT**. Все ПК были соединены с концентратором прямым медным кабелем (Copper Straight-Through), образуя топологию «звезда» с общим центром (hub).

![Топология сети: Hub-PT и четыре ПК](Screenshot_1.png){ #fig:002 width=70% }

Далее на каждом оконечном устройстве были настроены статические IP-адреса в одной подсети /24 (маска **255.255.255.0**):

- PC0 — **192.168.1.11**
- PC1 — **192.168.1.12**
- PC2 — **192.168.1.13**
- PC3 — **192.168.1.14**

После настройки адресации проект был переведён из режима **Realtime** в режим **Simulation**. На панели инструментов выбран режим **Add Simple PDU (P)**, после чего создан тестовый обмен: щелчок по **PC0**, затем по **PC2**. В списке событий появились PDU, соответствующие **ARP** (для определения MAC-адреса получателя) и **ICMP** (echo-пакет для проверки связи). Нажатием **Play** было отслежено прохождение кадров от PC0 к PC2 и обратный ответ.

![Моделирование обмена (ARP и ICMP) в режиме Simulation](Screenshot_2.png){ #fig:003 width=70% }

Затем было открыто окно **PDU Information** по событию и изучено, что происходит на уровнях модели OSI при прохождении кадра через концентратор. На вкладке **OSI Model** видно, что для **Hub-PT** обработка идёт на физическом уровне (Layer 1): концентратор получает сигнал на одном порту и ретранслирует его на остальные порты, не анализируя MAC-адреса и не принимая решений на канальном уровне.

![Информация о PDU на Hub-PT: обработка на уровне OSI](Screenshot_3.png){ #fig:004 width=85% }

На вкладке **PDU Formats** была изучена структура ICMP-пакета и кадра Ethernet (кадр Ethernet II с полезной нагрузкой IPv4 и ICMP).

Кадр Ethernet содержит следующие поля:

**1) Ethernet II (канальный уровень):**
- Preamble — синхронизация приёма;
- SFD (Start Frame Delimiter) — признак начала кадра;
- Destination MAC — MAC-адрес получателя;
- Source MAC — MAC-адрес отправителя;
- Type — тип протокола верхнего уровня (в данном случае **0x0800**, то есть **IPv4**);
- Data — полезная нагрузка (IP-пакет);
- FCS — контрольная сумма кадра (CRC) для проверки целостности.

**2) IP (сетевой уровень):**
- версия (IPv4), длина заголовка, идентификатор, флаги и смещение фрагментации;
- TTL, контрольная сумма заголовка;
- Source IP и Destination IP (например 192.168.1.13 ↔ 192.168.1.11);
- поле Protocol = 0x01, что соответствует ICMP.

**3) ICMP:**
- Type (например, 0x08 — Echo Request или 0x00 — Echo Reply);
- Code;
- Checksum;
- Identifier и Sequence Number;
- Data.

![Структура PDU: Ethernet II + IPv4 + ICMP](Screenshot_4.png){ #fig:005 width=85% }

**Изменения в кадре Ethernet при передвижении пакета.**  
В данной схеме используется концентратор, который работает только на 1-м уровне OSI и не изменяет поля заголовка Ethernet. Поэтому при прохождении через hub MAC-адреса источника и назначения, а также поле Type (0x0800) остаются прежними — кадр просто копируется на другие порты как электрический сигнал.

**Тип кадра Ethernet:** Ethernet II, значение поля Type — **0x0800 (IPv4)**.

**Структура MAC-адреса:**  
MAC-адрес имеет длину 48 бит (6 байт) и записывается шестнадцатерично. Он состоит из:
- первых 24 бит — OUI (идентификатор производителя);
- последних 24 бит — уникальная часть интерфейса.

После этого список событий был очищен (удалён сценарий моделирования). Далее снова создано два обмена **Add Simple PDU (P)**, но уже в обоих направлениях: сначала **PC0 → PC2**, затем **PC2 → PC0**. После нажатия **Play** в симуляции наблюдалась коллизия в общей среде передачи.

![Возникновение коллизии при одновременной передаче](Screenshot_5.png){ #fig:006 width=70% }

![Коллизия затрагивает все устройства в общем домене коллизий](Screenshot_6.png){ #fig:007 width=70% }

**Отображение коллизии и причины её возникновения.**  
Коллизия является событием физического уровня в сети Ethernet с методом доступа CSMA/CD. Она не записывается в отдельное поле заголовка Ethernet. При столкновении сигналов кадры искажаются, из-за чего контрольная сумма FCS становится некорректной, и кадр считается повреждённым.

В симуляции это отображается:
- значками столкновения возле устройств и концентратора;
- ошибками доставки кадров;
- соответствующими событиями в списке Simulation.

Причина коллизии заключается в том, что Hub-PT создаёт единый общий домен коллизий. Когда PC0 и PC2 начинают передачу одновременно, их сигналы накладываются в общей среде, что приводит к столкновению кадров и необходимости повторной передачи.

![Пример PDU при обмене: EtherType 0x0800, IPv4 и ICMP](Screenshot_7.png){ #fig:008 width=85% }

# Ход выполнения

В режиме **Realtime** в рабочем пространстве был размещён коммутатор **Cisco 2950-24** и четыре оконечных устройства PC. Все ПК были соединены с коммутатором прямым медным кабелем. Сформирована топология «звезда», в центре которой находится коммутатор.

![Топология с коммутатором и четырьмя ПК](Screenshot_8.png){ #fig:009 width=70% }

На каждом компьютере были заданы статические IP-адреса в одной подсети с маской **255.255.255.0**:

- PC4 — 192.168.1.21  
- PC5 — 192.168.1.22  
- PC6 — 192.168.1.23  
- PC7 — 192.168.1.24  

После настройки сеть была переведена в режим **Simulation**. С помощью инструмента **Add Simple PDU (P)** был сформирован обмен: сначала выбран PC4, затем PC6. В списке событий появились пакеты **ARP** и **ICMP**, после чего при нажатии **Play** было отслежено их перемещение от PC4 к PC6 и обратно.

![Передача ARP и ICMP через коммутатор](Screenshot_9.png){ #fig:010 width=70% }

**Различия в работе ARP по сравнению с концентратором.**  
В сети с концентратором ARP-запрос рассылается всем устройствам без анализа адресов, так как концентратор работает на физическом уровне. Коммутатор же функционирует на канальном уровне и ведёт таблицу MAC-адресов. Первый ARP-запрос всё равно рассылается на все порты (broadcast), но после получения ответа коммутатор запоминает соответствие MAC-адреса и порта. В дальнейшем кадры ICMP передаются уже **только на нужный порт**, а не всем устройствам, как это происходило при использовании концентратора.

Была изучена структура пакета ICMP и кадра Ethernet.

**Структура Ethernet-кадра:**
- Preamble и SFD — синхронизация передачи;
- Destination MAC — адрес получателя;
- Source MAC — адрес отправителя;
- Type = **0x0800** (IPv4);
- Data — IP-пакет;
- FCS — контрольная сумма.

**Структура IP-пакета:**
- версия, длина заголовка, TTL;
- Source IP и Destination IP (например 192.168.1.21 → 192.168.1.23);
- Protocol = 0x01 (ICMP).

**Структура ICMP:**
- Type (0x08 — запрос, 0x00 — ответ);
- Code;
- Checksum;
- Identifier и Sequence Number;
- Data.

![Структура PDU при передаче через коммутатор](Screenshot_10.png){ #fig:011 width=85% }

**Изменения в кадре Ethernet при передвижении пакета.**  
Коммутатор не изменяет содержимое кадра, а только пересылает его на нужный порт на основе MAC-таблицы. MAC-адрес источника и назначения остаются неизменными. Тип кадра — Ethernet II, поле Type равно **0x0800 (IPv4)**.  

**Структура MAC-адреса:**  
MAC-адрес имеет длину 48 бит (6 байт) и состоит из:
- первых 24 бит — идентификатор производителя (OUI);
- последних 24 бит — уникальный номер интерфейса.

После очистки списка событий были созданы два одновременных обмена: PC4 → PC6 и PC6 → PC4. После запуска симуляции пакеты успешно прошли через коммутатор.

![Одновременная передача пакетов через коммутатор](Screenshot_11.png){ #fig:012 width=70% }

**Почему не возникает коллизия.**  
Коммутатор разделяет сеть на отдельные домены коллизий. Каждый порт работает независимо, и передача происходит только между двумя нужными портами. Поэтому даже при одновременной передаче пакеты не сталкиваются, в отличие от концентратора, где используется общая среда передачи.

Далее в режиме **Realtime** концентратор и коммутатор были соединены между собой кроссовым кабелем. После перехода в режим Simulation были созданы два обмена: PC0 → PC4 и PC4 → PC0. В начале передачи наблюдалась коллизия, после чего пакеты успешно достигли пунктов назначения.

![Соединение концентратора и коммутатора](Screenshot_12.png){ #fig:013 width=75% }

![Возникновение коллизии в сегменте с концентратором](Screenshot_13.png){ #fig:014 width=75% }

![Успешная доставка пакетов после повторной передачи](Screenshot_14.png){ #fig:015 width=75% }

**Почему сначала возникает коллизия, а затем передача проходит успешно.**  
Сегмент сети, построенный на концентраторе, остаётся единым доменом коллизий. Когда устройства на стороне hub начинают передачу одновременно, сигналы накладываются, что вызывает столкновение кадров. После обнаружения коллизии узлы повторяют передачу с задержкой (механизм CSMA/CD). Коммутатор же передаёт кадры далее только на нужный порт, поэтому повторная передача проходит успешно.

После очистки списка событий и запуска симуляции были зафиксированы служебные пакеты **STP**.

![Структура STP-пакета (BPDU)](Screenshot_15.png){ #fig:016 width=85% }

**Структура STP и кадра Ethernet в BPDU.**  
Пакеты STP передаются в кадрах **Ethernet 802.3**, а не Ethernet II. В этом случае используется поле длины (Length), а данные передаются через уровень LLC.

Структура кадра:
- Destination MAC — специальный групповой адрес **01:80:C2:00:00:00** (зарезервирован для STP);
- Source MAC — MAC-адрес коммутатора;
- Length — длина данных;
- LLC-заголовок (DSAP, SSAP, Control);
- BPDU (Bridge Protocol Data Unit).

Структура BPDU включает:
- Protocol ID;
- Version;
- Message Type;
- Root ID (идентификатор корневого коммутатора);
- Root Path Cost;
- Bridge ID;
- Port ID;
- Hello Time, Max Age, Forward Delay.

Таким образом, кадры STP имеют тип **IEEE 802.3 + LLC**, а MAC-адрес назначения является групповым и используется всеми коммутаторами для обмена служебной информацией о построении дерева остовов.

В режиме **Realtime** в существующую топологию был добавлен маршрутизатор **Cisco 2911**. Маршрутизатор был соединён с коммутатором прямым медным кабелем.

![Добавление маршрутизатора и подключение к коммутатору](Screenshot_16.png){ #fig:017 width=80% }

На маршрутизаторе в разделе конфигурации интерфейса был задан статический IP-адрес **192.168.1.254** с маской **255.255.255.0**, после чего интерфейс был активирован установкой параметра **Port Status — On**.

После настройки сеть была переведена в режим **Simulation**, список событий очищен. С помощью инструмента **Add Simple PDU (P)** был инициирован обмен: сначала выбран **PC3**, затем маршрутизатор. После нажатия **Play** было прослежено движение пакетов **ARP, ICMP, STP и CDP**.

![Передача пакетов между ПК и маршрутизатором](Screenshot_17.png){ #fig:018 width=80% }

В процессе моделирования сначала выполняется ARP-запрос для определения MAC-адреса интерфейса маршрутизатора, затем происходит передача ICMP-пакетов. Параллельно в сети наблюдаются служебные кадры STP (между коммутаторами) и CDP (между сетевыми устройствами Cisco).

Была изучена структура пакета **CDP (Cisco Discovery Protocol)** на вкладке PDU Formats.

![Структура CDP-пакета](Screenshot_18.png){ #fig:019 width=85% }

**Структура кадра Ethernet в CDP.**  
Пакеты CDP передаются в кадрах **IEEE 802.3**, а не Ethernet II. В заголовке используется поле длины (Length), а полезная нагрузка передаётся через SNAP/LLC.

Основные поля кадра:

- Preamble и SFD — синхронизация передачи;
- Destination MAC — специальный групповой адрес **01:00:0C:CC:CC:CC** (зарезервирован Cisco для CDP);
- Source MAC — MAC-адрес интерфейса устройства-отправителя (коммутатора или маршрутизатора);
- Length — длина поля данных;
- LLC/SNAP-заголовок:
  - DSAP = 0xAA
  - SSAP = 0xAA
  - Control = 0x03
  - OUI = 0x00000C (идентификатор Cisco)
  - PID = 0x2000 (тип CDP);
- CDP Data — набор TLV-полей.

**Структура CDP-пакета (BPDU-подобная TLV-модель):**
- Version;
- TTL;
- Checksum;
- далее набор TLV-полей:
  - Device ID (идентификатор устройства);
  - Port ID (порт отправителя);
  - Platform (тип устройства);
  - Address (сетевые адреса);
  - Capabilities (функции устройства);
  - Software Version.

Каждое поле TLV состоит из:
- Type;
- Length;
- Value.

**Тип кадра Ethernet:**  
Используется формат **IEEE 802.3 + SNAP**, а не Ethernet II. Тип протокола определяется внутри SNAP (PID = 0x2000 для CDP).

**Структура MAC-адресов:**  
MAC-адрес имеет длину 48 бит (6 байт) и состоит из двух частей:
- первые 24 бита — OUI (идентификатор производителя оборудования);
- последние 24 бита — уникальный идентификатор сетевого интерфейса.

В CDP используется специальный мультикастовый MAC-адрес назначения, который принимается всеми устройствами Cisco в локальном сегменте сети. Это позволяет устройствам автоматически обнаруживать соседей и обмениваться служебной информацией о конфигурации.

# Вывод

В ходе работы были изучены принципы передачи данных в локальной сети с использованием концентратора, коммутатора и маршрутизатора в Cisco Packet Tracer. Исследованы процессы обмена ARP, ICMP, STP и CDP, а также структура кадров Ethernet и MAC-адресация. Установлено различие в работе концентратора и коммутатора, влияние доменов коллизий на передачу данных и особенности взаимодействия сетевых устройств на разных уровнях модели OSI.

## Контрольные вопросы

### 1. Дайте определение следующим понятиям: концентратор, коммутатор, маршрутизатор, шлюз (gateway). В каких случаях следует использовать тот или иной тип сетевого оборудования?

**Концентратор (Hub)** — это устройство физического уровня (Layer 1), которое передаёт полученный сигнал на все подключённые порты без анализа адресов.  
Используется в простых учебных или тестовых сетях. В реальных сетях применяется редко из-за коллизий и низкой эффективности.

**Коммутатор (Switch)** — устройство канального уровня (Layer 2), которое передаёт кадры только на нужный порт, используя таблицу MAC-адресов.  
Применяется для построения локальных сетей, уменьшения коллизий и повышения производительности.

**Маршрутизатор (Router)** — устройство сетевого уровня (Layer 3), которое соединяет разные сети и передаёт пакеты на основе IP-адресов.  
Используется для связи между подсетями, подключения к Интернету и организации маршрутизации.

**Шлюз (Gateway)** — узел сети, обеспечивающий взаимодействие между разными сетями или протоколами. Чаще всего роль шлюза выполняет маршрутизатор, через который происходит выход из локальной сети в другую сеть.

### 2. Дайте определение следующим понятиям: ip-адрес, сетевая маска, broadcast-адрес.

**IP-адрес** — это уникальный логический адрес устройства в сети, используемый для его идентификации и обмена данными.  
Состоит из двух частей: адрес сети и адрес узла.

**Сетевая маска** — это параметр, который определяет, какая часть IP-адреса относится к сети, а какая к конкретному устройству.  
Используется для определения принадлежности устройств к одной подсети.

**Broadcast-адрес** — это специальный адрес, предназначенный для отправки пакета всем устройствам в одной подсети.  
Он получается установкой всех битов части узла в IP-адресе в значение 1.

### 3. Как можно проверить доступность узла сети?

Доступность узла проверяется с помощью команды **ping**, которая отправляет ICMP Echo Request и ожидает ответ Echo Reply.  
Если ответ получен — узел доступен и соединение работает.  
Если ответ не приходит — устройство недоступно, либо есть проблемы с сетью, адресацией или маршрутизацией.
